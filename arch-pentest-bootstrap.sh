#!/usr/bin/env bash
set -euo pipefail

# Arch Linux básico: update + base-devel + herramientas básicas + net-tools + fonts + VirtualBox + paru + (WiFi/Bluetooth GNOME) + PipeWire

echo "[1/7] Actualizando sistema..."
sudo pacman -Syu --noconfirm

echo "[2/7] Instalando base-devel..."
sudo pacman -S --needed --noconfirm base-devel

echo "[3/7] Instalando herramientas básicas + net-tools..."
sudo pacman -S --needed --noconfirm \
  net-tools \
  vim nano \
  git curl wget \
  htop \
  man-db man-pages \
  bash-completion \
  which tree \
  unzip zip p7zip \
  lsof strace

echo "[4/7] Instalando fuentes y tipografías básicas..."
sudo pacman -S --needed --noconfirm \
  ttf-dejavu \
  ttf-liberation \
  noto-fonts \
  noto-fonts-emoji \
  ttf-jetbrains-mono

echo "[5/7] Instalando VirtualBox Guest Utils..."
sudo pacman -S --needed --noconfirm virtualbox-guest-utils

echo "Habilitando servicio vboxservice..."
sudo systemctl enable vboxservice --now

echo "[6/7] Instalando paru (AUR helper)..."
cd /tmp
rm -rf paru
git clone https://aur.archlinux.org/paru.git
cd paru
makepkg -si --noconfirm

echo "[7/7] Configurando Wi-Fi + Bluetooth (GNOME) + Audio (PipeWire)..."
sudo pacman -S --needed --noconfirm \
  networkmanager \
  network-manager-applet \
  wireless_tools \
  wpa_supplicant \
  bluez \
  bluez-utils \
  blueman \
  pipewire \
  pipewire-pulse \
  pipewire-alsa \
  wireplumber \
  pavucontrol

sudo systemctl enable NetworkManager --now
sudo systemctl enable bluetooth --now

echo "Listo ✅"
